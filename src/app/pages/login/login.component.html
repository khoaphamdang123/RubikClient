<div class="login-container">
    <div class="login-form">
      <h2>Login</h2>
      <form action="" [formGroup]="loginForm" (ngSubmit)="onSubmitForm()" autocomplete="off" novalidate>
        <div class="form-group">
        <label for="username">Username:</label>
        <input type="text" id="username" placeholder="Username" name="username" class="form-control" formControlName="username" required>
        @if(loginForm.get('username')?.hasError('required') && loginForm.get('username')?.touched) {<span class="form-error">Username is required</span>}
        </div>
        <div class="form-group password-field">
        <label for="password">Password:</label>
        <div class="password-input-wrapper">
          <input [type]="passwordVisible ? 'text' : 'password'" id="password" placeholder="Password" class="form-control" name="password" formControlName="password" required autocomplete="current-password">
          <button type="button" class="toggle-password-btn" (click)="togglePasswordVisibility()" [attr.aria-label]="passwordVisible ? 'Hide password' : 'Show password'" [attr.aria-pressed]="passwordVisible">
            @if(passwordVisible){
              <svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                <path d="M1 12s4-7 11-7 11 7 11 7-4 7-11 7-11-7-11-7z" stroke="currentColor" stroke-width="2" fill="none" stroke-linecap="round" stroke-linejoin="round"/>
                <circle cx="12" cy="12" r="3" stroke="currentColor" stroke-width="2" fill="none"/>
                <line x1="4" y1="4" x2="20" y2="20" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
              </svg>
            } @else {
              <svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                <path d="M1 12s4-7 11-7 11 7 11 7-4 7-11 7-11-7-11-7z" stroke="currentColor" stroke-width="2" fill="none" stroke-linecap="round" stroke-linejoin="round"/>
                <circle cx="12" cy="12" r="3" stroke="currentColor" stroke-width="2" fill="none"/>
              </svg>
            }
          </button>
        </div>
        @if(loginForm.get('password')?.hasError('required') && loginForm.get('password')?.touched) {<span class="form-error">Password is required</span>}
        </div>
        <div class="capcha">
          <div class="capcha-detail">
          <div class="capcha-item">
            <span class="capcha-content">{{capcha.first_number}} {{capcha.operator}} ? = {{capcha.result_number}}</span>
          </div>
         </div>
         <div class="capcha-input">
          <div class="capcha-input-row">
          <label for="capcha-res">Your result is:</label>
          <input type="number" id="capcha-res" name="capcha-res" class="capcha-res" #capchaInput required>
          <button class="refresh-capcha-btn" type="button" (click)="refreshCapcha()">
            <img src="assets/images/refresh.png">
          </button>
        </div>
        <div class="forgot-password"><a href="javascript:void(0);" (click)="showForm()">Forgot password?</a></div>
        @if(show_form)
        {
          <app-forgot-password-form (close_form)="closeForm()"></app-forgot-password-form>
        }
       @if(!is_valid_capcha){<span class="form-error capcha-break-row"><p>Your result result is incorrect</p></span>}
         </div>
         </div>
        <button type="submit" class="btn btn-primary center-button">Login</button>  
      </form>
    </div>
  </div>