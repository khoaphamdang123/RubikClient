<header class="header">
  <div class="logo">
    <a href="/about" aria-label="Home">
      <img src="assets/images/pngegg.png" alt="Rubik's Cube Logo">
    </a>
  </div>
  
  <!-- Mobile menu button -->
  <button 
    class="mobile-menu-btn"
    (click)="toggleMobileMenu()"
    [attr.aria-expanded]="isMobileMenuOpen"
    aria-label="Toggle navigation menu"
    aria-controls="mobile-menu">
    <span class="hamburger-line" [class.active]="isMobileMenuOpen"></span>
    <span class="hamburger-line" [class.active]="isMobileMenuOpen"></span>
    <span class="hamburger-line" [class.active]="isMobileMenuOpen"></span>
  </button>

  <nav class="nav" [class.mobile-open]="isMobileMenuOpen" id="mobile-menu">
    <ul>
      <li><a href="/products" (click)="closeMobileMenu()">PRODUCTS</a></li>
      <li><a href="/about" (click)="closeMobileMenu()">ABOUT</a></li>
      <li><a href="/solve" (click)="closeMobileMenu()">SOLVE-CUBE</a></li>
      <li>
        <a href="https://www.spinmaster.com/en-US/customer-support/" 
           target="_blank" 
           rel="noopener noreferrer"
           (click)="closeMobileMenu()">
          SUPPORTS
        </a>
      </li>
    </ul>
  </nav>
  
  <div class="dropdown">
    <button 
      #dropdownButton
      class="dropbtn"
      (click)="toggleDropdown()"
      [attr.aria-expanded]="isDropdownOpen"
      aria-label="User menu"
      aria-haspopup="true">
      <img class="avatar" 
           src="https://gw.alipayobjects.com/zos/rmsportal/BiazfanxmamNRoxxVxka.png" 
           alt="User avatar">
    </button>
    <div 
      #dropdownContent
      class="dropdown-content" 
      [class.show]="isDropdownOpen"
      [style.top]="dropdownPosition.top"
      [style.right]="dropdownPosition.right">
      <a href="" 
         onclick="return false;" 
         (click)="navigateProfile(); closeDropdown()"
         role="menuitem">Profile</a>
      @if(user && user.role_id==1) {
        <a href="/add-product" (click)="closeDropdown()" role="menuitem">Add Product</a>
        <a href="/add-account" (click)="closeDropdown()" role="menuitem">Add Account</a>
      }  
      <a href="" 
         onclick="return false;" 
         (click)="navigateDevices(); closeDropdown()"
         role="menuitem">Devices</a>
      <a href="" 
         onclick="return false;" 
         (click)="signOut(); closeDropdown()"
         role="menuitem">Sign Out</a>
    </div>
  </div>
</header>